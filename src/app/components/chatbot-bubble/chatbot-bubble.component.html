<div class="chatbot-container">
  <button class="chatbot-bubble" (click)="toggleChat()" [disabled]="isNotificationPopupOpen">
    <span class="bubble-icon">ðŸ’¬</span>
  </button>

  <div class="chat-window" *ngIf="isChatOpen">
    <div class="chat-header">
      <h3>AskSphere AI Chatbot</h3>
      <button class="close-btn" (click)="toggleChat()">Ã—</button>
    </div>
    <div class="chat-messages">
      <div *ngFor="let message of chatMessages" [ngClass]="message.isUser ? 'user-message' : 'bot-message'">
        <p>{{ message.text }}</p>
      </div>
      <div *ngIf="chatLoading" class="loading">Processing...</div>
      <div *ngIf="chatError" class="error">{{ chatError }}</div>
    </div>
    <div class="chat-input">
      <input
        type="text"
        [(ngModel)]="chatQuery"
        placeholder="Type your question..."
        (keyup.enter)="submitChatQuery()"
      />
      <button (click)="submitChatQuery()" [disabled]="chatLoading">Send</button>
    </div>
  </div>
</div>