<!-- Add these in index.html or component head -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

<div class="container-fluid p-0">
  <!-- Header -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" [routerLink]="['/']" style="color: #007bff;">
        <i class="bi bi-chat-left-text"></i> AskSphere
      </a>
      <div class="navbar-nav ms-auto">
        <a class="nav-link" [routerLink]="['/']">Home</a>
        <a class="nav-link" href="#">Pages</a>
        <a class="nav-link" href="#">Blog</a>
        <div class="input-group me-2" style="width: 300px;">
          <input type="text" class="form-control" placeholder="Type your search words..." [(ngModel)]="searchQuery" (ngSubmit)="onSearch()">
          <button class="btn btn-outline-secondary" type="button" (click)="onSearch()">
            <i class="bi bi-search"></i>
          </button>
        </div>
        <div class="dropdown">
          <button class="btn btn-primary dropdown-toggle" type="button" id="accountDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-person-circle"></i> Account
          </button>
          <ul class="dropdown-menu" aria-labelledby="accountDropdown">
            <li><h6 class="dropdown-header">{{ username }}</h6></li>
            <li><a class="dropdown-item" href="#">Profile</a></li>
            <li><a class="dropdown-item" href="#">Settings</a></li>
            <li><a class="dropdown-item text-danger" (click)="logout()">Logout</a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <!-- Header Section -->
  <div class="bg-light text-center py-5">
    <h1 class="fw-bold" style="color: #1e3a8a;">The Social Q&A Community</h1>
    <p class="text-muted mb-4">The question and answer site designed to help people, to help each other: To ask, to learn, to share, to grow.</p>
  </div>

<!-- Communities Section -->
<div class="container py-4">
  <h3 class="mb-4">Explore Communities</h3>
  <div class="row">
    <div class="col-md-3 col-sm-6 mb-3" *ngFor="let community of communities">
      <div class="card shadow-sm">
        <div class="card-body text-center py-2">
          <i class="bi {{ community.icon }} mb-2" style="font-size: 1.5rem; color: #007bff;"></i>
          <h6 class="card-title mb-2">{{ community.name }}</h6>
          <div class="d-flex justify-content-center gap-2">
            <button 
              class="btn btn-sm btn-primary" 
              (click)="joinCommunity(community.id)" 
              [disabled]="joinedCommunities.has(community.id)"
              *ngIf="!joinedCommunities.has(community.id)">
              Join
            </button>
            <button 
              class="btn btn-sm btn-outline-danger" 
              (click)="leaveCommunity(community.id)" 
              *ngIf="joinedCommunities.has(community.id)">
              Leave
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- Main Content -->
  <div class="container py-4">
    <div class="row">
      <!-- Sidebar -->
      <div class="col-md-2">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link" [routerLink]="['/']"><i class="bi bi-house-door me-2"></i> Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active text-primary" [routerLink]="['/questions']"><i class="bi bi-question-circle me-2"></i> Questions</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"><i class="bi bi-people me-2"></i> Communities</a>
            <ul class="nav flex-column ms-3">
              <li class="nav-item" *ngFor="let community of communities | filter:joinedCommunities">
                <a class="nav-link small" href="#">{{ community.name }}</a>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"><i class="bi bi-award me-2"></i> Badges</a>
            <ul class="nav flex-column ms-3">
              <li class="nav-item" *ngFor="let badge of badges">
                <a class="nav-link small" href="#">{{ badge }}</a>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"><i class="bi bi-person me-2"></i> Profile</a>
          </li>
        </ul>
      </div>

      <!-- Question List -->
      <div class="col-md-7">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h5>All Questions <span class="text-muted">({{ questions.length }} questions)</span></h5>
          <div class="dropdown">
            <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
              Newest
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">Newest</a></li>
              <li><a class="dropdown-item" href="#">Oldest</a></li>
              <li><a class="dropdown-item" href="#">Most Voted</a></li>
            </ul>
          </div>
        </div>
        <div class="question-item border-bottom py-3" *ngFor="let question of questions">
          <div class="d-flex">
            <div class="stats me-3 text-center">
              <div class="mb-2">
                <button class="btn btn-sm p-0" (click)="voteQuestion(question.id, 1)">
                  <i class="bi bi-caret-up-fill"></i>
                </button>
                <span class="d-block">{{ question.votes }}</span>
                <button class="btn btn-sm p-0" (click)="voteQuestion(question.id, -1)">
                  <i class="bi bi-caret-down-fill"></i>
                </button>
                <small class="text-muted">votes</small>
              </div>
              <div class="mb-2">
                <span class="d-block {{ question.answers > 0 ? 'text-success' : '' }}">{{ question.answers }}</span>
                <small class="text-muted">answers</small>
              </div>
              <div>
                <span class="d-block">{{ question.views }}</span>
                <small class="text-muted">views</small>
              </div>
            </div>
            <div class="flex-grow-1">
              <h6 class="mb-1">
                <a [routerLink]="['/question', question.id]" class="text-primary text-decoration-none">{{ question.title }}</a>
              </h6>
              <p class="text-muted small mb-1">
                {{ question.description | slice:0:100 }}...
              </p>
              <div class="d-flex justify-content-between">
                <div>
                  <span class="badge bg-light text-dark me-1" *ngFor="let tag of question.tags">{{ tag }}</span>
                </div>
                <div class="text-muted small">
                  <img src="https://via.placeholder.com/20" alt="User Avatar" class="rounded-circle me-1" style="width: 20px; height: 20px;">
                  {{ question.user }} • {{ question.time }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Recommended Questions -->
      <div class="col-md-3">
        <h6 class="mb-3">Recommended Questions</h6>
        <div class="related-question mb-3" *ngFor="let recommended of recommendedQuestions">
          <a [routerLink]="['/question', recommended.id]" class="text-primary text-decoration-none">{{ recommended.title }}</a>
          <p class="text-muted small mb-0">{{ recommended.time }} • by {{ recommended.user }}</p>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .nav-link { color: #6c757d; }
  .nav-link:hover { color: #007bff; }
  .nav-link.active { font-weight: bold; }
  .stats { width: 80px; }
  .stats span { font-size: 1.2rem; font-weight: bold; }
  .badge { font-size: 0.75rem; }
  .question-item:hover { background-color: #f8f9fa; }
  .card:hover { transform: translateY(-5px); transition: transform 0.2s; }
  .card-body { padding: 1rem; }
  .card-title { font-size: 1rem; }
</style>

<script>
  $(document).ready(() => {
    $('.question-item').hide().fadeIn(500);
  });
</script>